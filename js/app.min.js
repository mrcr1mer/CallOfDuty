(()=>{"use strict";const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.target.classList.toggle("_animate",e.isIntersecting),e.isIntersecting&&t.unobserve(e.target)}))}),{threshold:.25}),t=document.querySelectorAll("._anim-translateY");t.length>0&&t.forEach((t=>{e.observe(t)})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",(()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}))}(),function(){const e=document.querySelector(".edit-profile__item input"),t=document.querySelector(".edit-profile__preview");e&&e.addEventListener("change",(()=>{!function(n){if(!["image/jpg","image/jpeg","image/png","image/webp"].includes(n.type))return alert("Разрешены только изображения"),void(e.value="");if(n.size>52428800)return void alert("Файл должен быть менее 2мб");let s=new FileReader;s.onload=e=>{t.innerHTML=`<img src="${e.target.result}" alt="Фото">`},s.onerror=e=>{alert("Ошибка")},s.readAsDataURL(n)}(e.files[0])}))}();const n=document.querySelector(".icon-header"),s=document.querySelector(".header__top"),i=document.querySelector(".menu");n&&n.addEventListener("click",(()=>{n.classList.contains("active")?n.classList.add("reverse"):n.classList.remove("reverse"),document.body.classList.toggle("burger-lock"),n.classList.toggle("active"),s.classList.toggle("active"),i.classList.toggle("active")}));const l=document.querySelector(".menu__list"),o=window.matchMedia("(max-width: 1024px)");function r(e){e.matches?l.lastElementChild.hasAttribute("data-chat")||l.insertAdjacentHTML("beforeend",'<li data-chat=""><a href="chat.html" class="menu__link">Чат</a></li>'):l.lastElementChild.hasAttribute("data-chat")&&l.lastElementChild.remove()}l&&(o.addEventListener("change",r),r(o));const a=document.querySelectorAll(".menu__link"),c=window.location.href,d=window.location.origin;a.forEach((e=>{c===`${d}/`||c===`${d}/CallOfDuty/`?a[0].classList.add("active"):e.href===c?e.classList.add("active"):e.classList.remove("active")}));const u=document.querySelector(".aside__arrows"),p=document.querySelectorAll(".aside-open");if(u){function F(){for(let e=0;e<p.length;e++){const t=p[e];t&&t.classList.toggle("active")}}u.addEventListener("click",F)}const m=document.querySelectorAll(".popup__tab"),y=document.querySelectorAll(".popup__form");m.length>0&&function(e,t){for(let n=0;n<e.length;n++){const s=e[n];s.addEventListener("click",(()=>{const n=s.getAttribute("data-tab");for(let s=0;s<e.length;s++)n===t[s].getAttribute("data-tab-content")?(e[s].classList.add("active"),t[s].classList.add("active")):(e[s].classList.remove("active"),t[s].classList.remove("active"))}))}}(m,y);const v=document.getElementsByTagName("input");v.length>0&&h(v);const f=document.getElementsByTagName("textarea");function h(e){for(let t=0;t<e.length;t++){const n=e[t],s=n.placeholder;n.addEventListener("focus",(function(e){n.placeholder="",n.classList.remove("_error")})),n.addEventListener("blur",(function(e){n.placeholder=s}))}}f.length>0&&h(f);const g=document.querySelector(".profile__wins i"),_=document.querySelector(".profile__trophies");g&&(g.addEventListener("mouseover",(()=>{_.classList.add("_show"),g.previousElementSibling.classList.add("_stop")})),g.addEventListener("mouseout",(()=>{_.classList.remove("_show"),g.previousElementSibling.classList.remove("_stop")})));const L=document.querySelectorAll(".popup-link"),b=document.querySelector("body"),E=document.querySelectorAll(".lock-padding");let S=!0;if(L.length>0)for(let J=0;J<L.length;J++){const V=L[J];V.addEventListener("click",(function(e){const t=V.getAttribute("href").replace("#","");q(document.getElementById(t)),e.preventDefault()}))}const w=document.querySelectorAll(".close-popup");if(w.length>0)for(let G=0;G<w.length;G++){const K=w[G];K.addEventListener("click",(function(e){A(K.closest(".popup")),e.preventDefault()}))}function q(e){if(e&&S){const t=document.querySelector(".popup.open");t?A(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(E.length>0)for(let t=0;t<E.length;t++)E[t].style.paddingRight=e;b.style.paddingRight=e,b.classList.add("lock"),S=!1,setTimeout((function(){S=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||A(e.target.closest(".popup"))}))}}function A(e,t=!0){e.closest(".popup._sending")||S&&(e.classList.remove("open"),t&&(setTimeout((function(){if(E.length>0)for(let e=0;e<E.length;e++)E[e].style.paddingRight="0px";b.style.paddingRight="0px",b.classList.remove("lock")}),800),S=!1,setTimeout((function(){S=!0}),800)))}document.addEventListener("keydown",(function(e){"Escape"===e.key&&A(document.querySelector(".popup.open"))})),new Swiper(".about-swiper",{loop:!0,grabCursor:!0,initialSlide:3,speed:800,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},autoplay:{delay:3500,stopOnLastSlide:!1,disableOnInteraction:!1},mousewheel:{sensitivity:1,eventsTarget:".about-swiper"},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!0},preloadImages:!1,lazy:{loadOnTransitionStart:!0,loadPrevNext:!0}});let x,k=document.querySelector(".icon-chat");k&&document.addEventListener("scroll",(function(){k.style.opacity=1,k.style.visibility="visible",k.style.transform="translate(0,0)",null!=x&&clearTimeout(x),x=setTimeout((()=>{k.style.opacity=0,k.style.visibility="hidden",k.style.transform="translate(0,100%)"}),2500)}));const T=document.querySelector(".chat__content");T&&M(T);const $=document.querySelector(".chat__scroll-button");$&&C($,T);const P=document.querySelector(".chat-aside__content");P&&M(P);const H=document.querySelector(".chat-aside__scroll-button");function M(e){e.scrollTo(0,e.scrollHeight)}function C(e,t){const n=t.scrollTop-100;t.addEventListener("scroll",(()=>{t.scrollTop<=n?(e.style.opacity=1,e.style.visibility="visible",e.style.transform="translate(0,0)"):(e.style.opacity=0,e.style.visibility="hidden",e.style.transform="translate(0,150%)")})),e.addEventListener("click",(()=>{t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}))}H&&C(H,P);const B=document.querySelector(".chat__header");B&&B.addEventListener("click",(()=>{history.back()}));const I=document.querySelector(".chat-aside__body.blocked");I&&I.insertAdjacentHTML("afterbegin",'<div class="icon-blocked _icon-block"></div>\n\t\t<h3 class="title-blocked">Вы не вошли в аккаунт</h3>');const R=document.querySelector(".list-players__input-searh"),D=document.querySelectorAll(".search-label"),N=document.querySelector(".search-alert"),W=document.querySelector(".list-players__items");if(R){R.addEventListener("input",Z);const Q=document.querySelector(".list-players__reset");function Z(){let e=R.value.toLowerCase().trim(),t=0;e?(Q.style.opacity="1",Q.style.visibility="visible"):(Q.style.opacity=0,Q.style.visibility="hidden");for(let n=0;n<D.length;n++){const s=D[n];s.innerHTML.toLowerCase().includes(e)?s.closest(".list-players__item").hidden=!1:(s.closest(".list-players__item").hidden=!0,t++)}t==D.length?(N.textContent="Нет совпадений",N.classList.add("_show")):(N.textContent="",N.classList.remove("_show")),t>=1?W.classList.add("_active"):W.classList.remove("_active")}Q.addEventListener("click",(()=>{R.focus(),R.value="",Z()}))}const j=document.querySelector(".info-tournament__button"),O=document.querySelector(".info-tournament__description"),Y=document.querySelector(".info-tournament__img");j&&j.addEventListener("click",(e=>{j.classList.toggle("active"),O.classList.toggle("active"),Y.classList.add("disabled"),j.classList.contains("active")||setTimeout((()=>{Y.classList.remove("disabled")}),800)})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".tour-table__body");if(!e)return;let t=document.querySelector("#data"),n=JSON.parse(t.innerHTML);t.remove();let s=window.matchMedia("(min-width: 1025px)");s.addEventListener("change",(()=>{s.matches?$():(l.removeEventListener("pointerdown",C),l.removeEventListener("pointerup",B),l.removeEventListener("pointermove",I),l.removeEventListener("wheel",H),S.removeEventListener("click",P),document.querySelector(".wrapper").removeEventListener("pointermove",M))}));let i,l,o,r,a,c,d,u,p=1,m=!1,y=0,v=0,f={x:0,y:0};const h=n.stages,g=new Array,_=document.querySelector(".edit__btn"),L=document.querySelector(".edit__save"),b=document.querySelector(".edit__tips"),E=document.querySelector(".table-scale__text"),S=document.querySelector(".table-scale__reset");function w(){e.innerHTML="";for(let t in h){const n=h[t];g[t]=new Array;let s=document.createElement("div");s.className="tour-table__column",s.style=h.length-1==t?`--p:${2**(t-1)};`:`--p:${2**t};`,s.insertAdjacentHTML("afterbegin",q(t));for(let e in n){const i=n[e];let l,o=document.createElement("div");o.className="tour-table__para",o.setAttribute("data-pos",T(t,e)),h.length-2==t&&e>0&&o.classList.add("extra"),h.length-1==t?(l=A(i),o.classList.add("final")):l=x(i,t,e),o.insertAdjacentHTML("beforeend",l),g[t][e]=k(o,t,e),s.append(o)}e.append(s)}$()}function q(e){let t;return t=h.length-1==e?"Финал":h.length-2==e?"Полуфинал":"Этап "+(+e+1),`\n         <div class="tour-table__stage stage">\n            <div class="stage__title">${t}</div>\n         </div>\n      `}function A(e){return`\n         <div class="tour-table__player player player-final first">\n               <div class="player__info"> \n                  <div class="player__name">${e.first}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final second">\n               <div class="player__info">\n                  <div class="player__name">${e.second}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final third">\n               <div class="player__info">\n                  <div class="player__name">${e.third}</div>\n               </div>\n         </div>\n      `}function x(e,t,n){let s,i=e.score.split(","),l="",o="",r='\n         <div class="bars bars__first">\n            <div class="bars bars__second">\n               <div class="bars bars__last"></div>\n            </div>\n         </div>\n      ';return e.player1&&(l=`<div class="player__name">${e.player1}</div><input type="text" disabled class="player__score" name="edit" value="${i[0]}">`),e.player2&&(o=`<div class="player__name">${e.player2}</div><input type="text" disabled class="player__score" name="edit" value="${i[1]}">`),h.length-2==t&&(r=0==n?'<div class="bars bars__staight"></div>':""),s=`\n         <div class="tour-table__player player member1" id="${t}${n}1">\n            <div class="player__info">${l}</div>\n         </div>\n         <div class="tour-table__player player member2" id="${t}${n}2"> \n            <div class="player__info">${o}</div>\n         </div>\n         ${r}\n      `,s}function k(e,t,n){let s={},i=new Array;return t<=0?{self:e,next:i}:([g[t-1][2*n]||g[t-1][2*n-2],g[t-1][2*n+1]||g[t-1][2*n-1]].forEach((t=>{t.next.push(e)})),s={self:e,next:i},s)}function T(e,t){let n,s;return n=t%2==0,s=h.length-1==t,`${e},${t},${n},${s}`}function $(){s.matches&&(s.matches&&(l=document.getElementById("zoom"),o=l.parentElement.clientHeight,r=l.parentElement.clientWidth,a=l.scrollHeight,c=l.scrollWidth),l.addEventListener("pointerdown",C),l.addEventListener("pointerup",B),l.addEventListener("pointermove",I),l.addEventListener("wheel",H),S.addEventListener("click",P),document.querySelector(".wrapper").addEventListener("pointermove",M),D())}function P(){S.classList.remove("active"),p=1,m=!1,y=0,v=0,f={x:0,y:0},W()}function H(e){if(e.ctrlKey){e.preventDefault(),R();let[t,n]=function(e){return[e.clientX-u,e.clientY-d]}(e),s=(t-y)/p,i=(n-v)/p,l=e.wheelDelta?e.wheelDelta:-e.deltaY;l>0?p*=1.2:p/=1.2,p>5&&(p=5),y=t-s*p,v=n-i*p,l<0&&(y>=0&&(y=0),v>=0&&(v=0)),p<=N&&(p=N),1!=N||p!=N?S.classList.add("active"):S.classList.remove("active"),D(),W()}}function M(e){R(),(e.clientX<u||e.clientY<d||e.clientX>u+r||e.clientY>d+o)&&(m=!1)}function C(e){f={x:e.clientX-y,y:e.clientY-v},m=!0}function B(){m=!1}function I(e){if(!m)return;let t=e.clientX-f.x,n=e.clientY-f.y;y=t<i.xmax?i.xmax:t>0?0:t,v=n<i.ymax?i.ymax:n>0?0:n,W()}function R(){d=l.parentNode.getBoundingClientRect().top,u=l.parentNode.getBoundingClientRect().left}function D(){let e=-(c*p-r),t=-(a*p-o);t>-10&&(t=0),e>-10&&(e=0),i={xmax:e,ymax:t}}w();const N=function(){let e=Math.floor(r/c*100)/100,t=Math.floor(window.innerHeight/a*100)/100;return e>1&&(e=1),t>1&&(t=1),e>=t?e:t}();function W(){l.style.transform="translate("+y+"px, "+v+"px) scale("+p+")",E.innerText=~~(p/1*100)+"%"}let j,O,Y,X,z=1,U=[],F=!0,J=[];function V(){j=document.querySelectorAll(".player__score");for(let e=0;e<j.length;e++){const t=j[e];t.removeAttribute("disabled"),t.classList.add("_edit")}s.matches&&(j[0].focus(),j[0].setSelectionRange(j[0].value.length,j[0].value.length))}function G(e){if("Enter"==e.key){let e=j[z],t=e.value.length;e.focus(),e.setSelectionRange(t,t),z++}"Tab"==e.key&&z++,z>j.length-1&&(z=0)}function K(t){let n=t.target.closest(".tour-table__para");if(!e.classList.contains("_block"))if(n){let e=n.getAttribute("data-pos").split(",");if(n.classList.contains("_cause"))return;ne(U),Z(e,U),n.classList.add("_cause"),O=n}else ne(U)}function Q(t){let n=t.target,s=n.closest(".tour-table__player");if(n.classList.contains("player__score"))return j=document.querySelectorAll(".player__score"),void(z=function(e,t){for(let n=0;n<e.length;n++)if(t.isEqualNode(e[n].closest(".player")))return n;return!1}(j,s)+1||z);if(s){let t=s.closest(".tour-table__para").getAttribute("data-pos").split(",");if(e.classList.add("_block"),1==function(e){if(!F)return!1;for(const t of J)if(e.isEqualNode(t))return X=t,!0}(s))!function(t){F=!1;let n=te(Y),s=te(X),i=Y.cloneNode(!0);i.style.position="absolute",Y.prepend(i),i.style.cssText+="\n         transition: all 0.5s ease 0s;\n         z-index: 120;\n      ";let l=(s.x-n.x)/p,o=(s.y-n.y)/p;setTimeout((()=>{Y.classList.remove("_active"),Y.style.boxShadow="inset 0px 0px 3px rgba(105, 105, 105, 0.65)",X.style.width=`${X.offsetWidth}px`,i.style.cssText+=`\n            position: absolute;\n            top: ${o}px;\n            left: ${l}px;\n            width: ${X.offsetWidth}px;\n            box-shadow: none;\n         `,i.classList.add("_pseudo"),X.innerHTML="",X.classList.remove("hover"),i.querySelector(".player__score").value="0"}),0),setTimeout((()=>{X.append(i.querySelector(".player__info")),X.classList.add("_changed"),i.remove(),F=!0,e.classList.remove("_block"),X.removeAttribute("style"),Y.removeAttribute("style"),X.length=0,J.length=0}),1e3)}();else if(s.classList.contains("_active"))s.classList.remove("_active"),e.classList.remove("_block");else{if(""==s.querySelector(".player__info").innerHTML)return;Z(t,J),Y&&Y.classList.remove("_active"),s.classList.add("_active"),Y=s}}}function Z(e,t){let n=g[e[0]][e[1]];ne(t),n.next.forEach((n=>{let s;if(n.classList.contains("final")){let s,i,l=n.querySelectorAll(".player"),o=l.length,r=2*e[1];if(r+1>o)return;return r+2>o&&(s=l[r],s.classList.add("hover"),t.push(s)),void(r+2<=o&&(s=l[r],s.classList.add("hover"),i=l[r+1],i.classList.add("hover"),t.push(s,i)))}"true"==e[2]?(s=n.querySelector(".member1"),s.classList.add("hover")):(s=n.querySelector(".member2"),s.classList.add("hover")),t.push(s)}))}function ee(e){let t=e.target.closest(".player");if(!t)return;let n=t.getAttribute("id");(!n||t&&!n.startsWith("0"))&&(t.querySelector(".player__info").innerHTML="",t.classList.add("_changed"),j=document.querySelectorAll(".player__score"),z--)}function te(e){let{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function ne(e){O&&O.classList.remove("_cause"),0!=e.length&&(e.forEach((e=>{e.classList.remove("hover")})),e.length=0)}_&&_.addEventListener("click",(()=>{_.classList.toggle("active"),_.classList.contains("active")?(b.style.height=b.scrollHeight+"px",b.classList.add("active"),V(),document.addEventListener("keydown",G),e.addEventListener("pointerover",K),e.addEventListener("click",Q),e.addEventListener("dblclick",ee)):function(){b.classList.remove("active"),b.style.height="0px",j=document.querySelectorAll(".player__score");for(let e=0;e<j.length;e++){const t=j[e];t.setAttribute("disabled",""),t.classList.remove("_edit")}document.removeEventListener("keydown",G),e.removeEventListener("pointerover",K),e.removeEventListener("click",Q),e.removeEventListener("dblclick",ee)}()})),L&&L.addEventListener("click",(function(){let e=document.querySelectorAll("._changed");e.length<=0||!_.classList.contains("active")||(e.forEach((e=>{let t=e.closest(".tour-table__para").getAttribute("data-pos").split(","),n=h[+t[0]][+t[1]],s=n.score,i="",l="";if(""!=e.querySelector(".player__info").innerHTML&&(i=e.querySelector(".player__name").innerText,l=e.querySelector(".player__score").value),s&&(s=s.split(",")),e.classList.contains("first"))return void(n.first=i);if(e.classList.contains("second"))return void(n.second=i);if(e.classList.contains("third"))return void(n.third=i);let o=1;e.classList.contains("member2")&&(o=2),i!=n[`player${o}`]&&(n[`player${o}`]=i),l!=s[o-1]&&(s[o-1]=l,n.score=s.join(","))})),w(),V())})),e&&e.addEventListener("change",(e=>{e.target.closest(".player").classList.add("_changed")}))}),!1);const X=document.querySelectorAll("[data-spollers]");if(X.length>0){const ee=Array.from(X).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));ee.length>0&&ne(ee);const te=Array.from(X).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(te.length>0){const oe=[];te.forEach((e=>{const t={},n=e.dataset.spollers.split(",");t.value=n[0],t.type=n[1]?n[1].trim():"max",t.item=e,oe.push(t)}));let re=oe.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));re=re.filter((function(e,t,n){return n.indexOf(e)===t})),re.forEach((e=>{const t=e.split(","),n=t[1],s=t[2],i=window.matchMedia(t[0]),l=oe.filter((function(e){if(e.value===n&&e.type===s)return!0}));i.addEventListener("change",(()=>{ne(l,i)})),ne(l,i)}))}function ne(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),se(e),e.addEventListener("click",ie)):(e.classList.remove("_init"),se(e,!1),e.removeEventListener("click",ie))}))}function se(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function ie(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const n=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),s=n.closest("[data-spollers]"),i=!!s.hasAttribute("data-one-spoller");s.querySelectorAll("._slide").length||(i&&!n.classList.contains("_active")&&le(s),n.classList.toggle("_active"),U(n.nextElementSibling,500)),e.preventDefault()}}function le(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),z(t.nextElementSibling,500))}}let z=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.style.transitionTimingFunction="ease",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t))},U=(e,t=500)=>e.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.transitionTimingFunction="ease",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t)}})(e,t):z(e,t)})();