(()=>{"use strict";const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.target.classList.toggle("_animate",e.isIntersecting),e.isIntersecting&&t.unobserve(e.target)}))}),{threshold:.2}),t=document.querySelectorAll("._anim-item");t.length>0&&t.forEach((t=>{e.observe(t)}));const n=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.target.classList.toggle("_animate",e.isIntersecting),e.isIntersecting&&t.unobserve(e.target)}))}),{threshold:0}),s=document.querySelectorAll("._table-item");s.length>0&&s.forEach((e=>{n.observe(e)})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",(()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}))}(),function(){const e=document.querySelector(".edit-profile__item input"),t=document.querySelector(".edit-profile__preview");e&&e.addEventListener("change",(()=>{!function(n){if(!["image/jpg","image/jpeg","image/png","image/webp"].includes(n.type))return alert("Разрешены только изображения"),void(e.value="");if(n.size>52428800)return void alert("Файл должен быть менее 2мб");let s=new FileReader;s.onload=e=>{t.innerHTML=`<img src="${e.target.result}" alt="Фото">`},s.onerror=e=>{alert("Ошибка")},s.readAsDataURL(n)}(e.files[0])}))}();const i=document.querySelector(".icon-header"),o=document.querySelector(".header__top"),l=document.querySelector(".menu");i&&i.addEventListener("click",(()=>{i.classList.contains("active")?i.classList.add("reverse"):i.classList.remove("reverse"),document.body.classList.toggle("burger-lock"),i.classList.toggle("active"),o.classList.toggle("active"),l.classList.toggle("active")}));const r=document.querySelector(".menu__list"),a=window.matchMedia("(max-width: 1024px)");function c(e){e.matches?r.lastElementChild.hasAttribute("data-chat")||r.insertAdjacentHTML("beforeend",'<li data-chat=""><a href="chat.html" class="menu__link">Чат</a></li>'):r.lastElementChild.hasAttribute("data-chat")&&r.lastElementChild.remove()}r&&(a.addEventListener("change",c),c(a));const d=document.querySelectorAll(".menu__link"),u=window.location.href,p=window.location.origin;d.forEach((e=>{u===`${p}/`||u===`${p}/CallOfDuty/`?d[0].classList.add("active"):e.href===u?e.classList.add("active"):e.classList.remove("active")}));const m=document.querySelector(".aside__arrows"),y=document.querySelectorAll(".aside-open");if(m){function F(){for(let e=0;e<y.length;e++){const t=y[e];t&&t.classList.toggle("active")}}m.addEventListener("click",F)}const v=document.querySelectorAll(".popup__tab"),f=document.querySelectorAll(".popup__form");v.length>0&&function(e,t){for(let n=0;n<e.length;n++){const s=e[n];s.addEventListener("click",(()=>{const n=s.getAttribute("data-tab");for(let s=0;s<e.length;s++)n===t[s].getAttribute("data-tab-content")?(e[s].classList.add("active"),t[s].classList.add("active")):(e[s].classList.remove("active"),t[s].classList.remove("active"))}))}}(v,f);const h=document.getElementsByTagName("input");h.length>0&&_(h);const g=document.getElementsByTagName("textarea");function _(e){for(let t=0;t<e.length;t++){const n=e[t],s=n.placeholder;n.addEventListener("focus",(function(e){n.placeholder="",n.classList.remove("_error")})),n.addEventListener("blur",(function(e){n.placeholder=s}))}}g.length>0&&_(g);const L=document.querySelector(".profile__wins i"),b=document.querySelector(".profile__trophies"),E=document.querySelector(".profile__image img");L&&(L.addEventListener("mouseover",(()=>{b.classList.add("_show"),L.previousElementSibling.classList.add("_stop"),E.classList.add("_show")})),L.addEventListener("mouseout",(()=>{b.classList.remove("_show"),L.previousElementSibling.classList.remove("_stop"),E.classList.remove("_show")})));const S=document.querySelectorAll(".popup-link"),w=document.querySelector("body"),q=document.querySelectorAll(".lock-padding");let A=!0;if(S.length>0)for(let J=0;J<S.length;J++){const V=S[J];V.addEventListener("click",(function(e){const t=V.getAttribute("href").replace("#","");k(document.getElementById(t)),e.preventDefault()}))}const x=document.querySelectorAll(".close-popup");if(x.length>0)for(let G=0;G<x.length;G++){const K=x[G];K.addEventListener("click",(function(e){T(K.closest(".popup")),e.preventDefault()}))}function k(e){if(e&&A){const t=document.querySelector(".popup.open");t?T(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(q.length>0)for(let t=0;t<q.length;t++)q[t].style.paddingRight=e;w.style.paddingRight=e,w.classList.add("lock"),A=!1,setTimeout((function(){A=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||T(e.target.closest(".popup"))}))}}function T(e,t=!0){e.closest(".popup._sending")||A&&(e.classList.remove("open"),t&&(setTimeout((function(){if(q.length>0)for(let e=0;e<q.length;e++)q[e].style.paddingRight="0px";w.style.paddingRight="0px",w.classList.remove("lock")}),800),A=!1,setTimeout((function(){A=!0}),800)))}document.addEventListener("keydown",(function(e){"Escape"===e.key&&T(document.querySelector(".popup.open"))})),new Swiper(".about-swiper",{loop:!0,grabCursor:!0,initialSlide:3,speed:800,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},autoplay:{delay:3500,stopOnLastSlide:!1,disableOnInteraction:!1},mousewheel:{sensitivity:1,eventsTarget:".about-swiper"},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!0},preloadImages:!1,lazy:{loadOnTransitionStart:!0,loadPrevNext:!0}});let $,P=document.querySelector(".icon-chat");P&&document.addEventListener("scroll",(function(){P.style.opacity=1,P.style.visibility="visible",P.style.transform="translate(0,0)",null!=$&&clearTimeout($),$=setTimeout((()=>{P.style.opacity=0,P.style.visibility="hidden",P.style.transform="translate(0,100%)"}),2500)}));const H=document.querySelector(".chat__content");H&&B(H);const M=document.querySelector(".chat__scroll-button");M&&R(M,H);const C=document.querySelector(".chat-aside__content");C&&B(C);const I=document.querySelector(".chat-aside__scroll-button");function B(e){e.scrollTo(0,e.scrollHeight)}function R(e,t){const n=t.scrollTop-100;t.addEventListener("scroll",(()=>{t.scrollTop<=n?(e.style.opacity=1,e.style.visibility="visible",e.style.transform="translate(0,0)"):(e.style.opacity=0,e.style.visibility="hidden",e.style.transform="translate(0,150%)")})),e.addEventListener("click",(()=>{t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}))}I&&R(I,C);const D=document.querySelector(".chat__header");D&&D.addEventListener("click",(()=>{history.back()}));const N=document.querySelector(".chat-aside__body.blocked");N&&N.insertAdjacentHTML("afterbegin",'<div class="icon-blocked _icon-block"></div>\n\t\t<h3 class="title-blocked">Вы не вошли в аккаунт</h3>');const O=document.querySelector(".list-players__input-searh"),W=document.querySelectorAll(".search-label"),j=document.querySelector(".search-alert"),Y=document.querySelector(".list-players__items");if(O){O.addEventListener("input",Z);const Q=document.querySelector(".list-players__reset");function Z(){let e=O.value.toLowerCase().trim(),t=0;e?(Q.style.opacity="1",Q.style.visibility="visible"):(Q.style.opacity=0,Q.style.visibility="hidden");for(let n=0;n<W.length;n++){const s=W[n];s.innerHTML.toLowerCase().includes(e)?s.closest(".list-players__item").hidden=!1:(s.closest(".list-players__item").hidden=!0,t++)}t==W.length?(j.textContent="Нет совпадений",j.classList.add("_show")):(j.textContent="",j.classList.remove("_show")),t>=1?Y.classList.add("_active"):Y.classList.remove("_active")}Q.addEventListener("click",(()=>{O.focus(),O.value="",Z()}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".info-tournament__button"),t=document.querySelector(".info-tournament__description"),n=document.querySelector(".info-tournament__img");e&&(setTimeout((()=>{e.classList.toggle("active"),t.classList.toggle("active")}),400),e.addEventListener("click",(s=>{e.classList.toggle("active"),t.classList.toggle("active"),n.classList.add("disabled"),e.classList.contains("active")||setTimeout((()=>{n.classList.remove("disabled")}),800)})));const s=document.querySelector(".tour-table__body");if(!s)return;let i=document.querySelector("#data"),o=JSON.parse(i.innerHTML);i.remove();let l=window.matchMedia("(min-width: 1025px)");l.addEventListener("change",(()=>{l.matches?M():(a.removeEventListener("pointerdown",R),a.removeEventListener("pointerup",D),a.removeEventListener("pointermove",N),a.removeEventListener("wheel",I),A.removeEventListener("click",C),document.querySelector(".wrapper").removeEventListener("pointermove",B))}));let r,a,c,d,u,p,m,y,v=1,f=!1,h=0,g=0,_={x:0,y:0};const L=o.stages,b=new Array,E=document.querySelector(".edit__btn"),S=document.querySelector(".edit__save"),w=document.querySelector(".edit__tips"),q=document.querySelector(".table-scale__text"),A=document.querySelector(".table-scale__reset");function x(){s.innerHTML="";for(let e in L){const t=L[e];b[e]=new Array;let n=document.createElement("div");n.className="tour-table__column",n.style=L.length-1==e?`--p:${2**(e-1)};`:`--p:${2**e};`,n.insertAdjacentHTML("afterbegin",k(e));for(let s in t){const i=t[s];let o,l=document.createElement("div");l.className="tour-table__para",l.setAttribute("data-pos",H(e,s)),L.length-2==e&&s>0&&l.classList.add("extra"),L.length-1==e?(o=T(i),l.classList.add("final")):o=$(i,e,s),l.insertAdjacentHTML("beforeend",o),b[e][s]=P(l,e,s),n.append(l)}s.append(n)}M()}function k(e){let t;return t=L.length-1==e?"Финал":L.length-2==e?"Полуфинал":"Этап "+(+e+1),`\n         <div class="tour-table__stage stage">\n            <div class="stage__title">${t}</div>\n         </div>\n      `}function T(e){return`\n         <div class="tour-table__player player player-final first">\n               <div class="player__info"> \n                  <div class="player__name">${e.first}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final second">\n               <div class="player__info">\n                  <div class="player__name">${e.second}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final third">\n               <div class="player__info">\n                  <div class="player__name">${e.third}</div>\n               </div>\n         </div>\n      `}function $(e,t,n){let s,i=e.score.split(","),o="",l="",r='\n         <div class="bars bars__first">\n            <div class="bars bars__second">\n               <div class="bars bars__last"></div>\n            </div>\n         </div>\n      ';return e.player1&&(o=`<div class="player__name">${e.player1}</div><input type="text" disabled class="player__score" name="edit" value="${i[0]}">`),e.player2&&(l=`<div class="player__name">${e.player2}</div><input type="text" disabled class="player__score" name="edit" value="${i[1]}">`),L.length-2==t&&(r=0==n?'<div class="bars bars__staight"></div>':""),s=`\n         <div class="tour-table__player player member1" id="${t}${n}1">\n            <div class="player__info">${o}</div>\n         </div>\n         <div class="tour-table__player player member2" id="${t}${n}2"> \n            <div class="player__info">${l}</div>\n         </div>\n         ${r}\n      `,s}function P(e,t,n){let s={},i=new Array;return t<=0?{self:e,next:i}:([b[t-1][2*n]||b[t-1][2*n-2],b[t-1][2*n+1]||b[t-1][2*n-1]].forEach((t=>{t.next.push(e)})),s={self:e,next:i},s)}function H(e,t){let n,s;return n=t%2==0,s=L.length-1==t,`${e},${t},${n},${s}`}function M(){l.matches&&(l.matches&&(a=document.getElementById("zoom"),c=a.parentElement.clientHeight,d=a.parentElement.clientWidth,u=a.scrollHeight,p=a.scrollWidth),a.addEventListener("pointerdown",R),a.addEventListener("pointerup",D),a.addEventListener("pointermove",N),a.addEventListener("wheel",I),A.addEventListener("click",C),document.querySelector(".wrapper").addEventListener("pointermove",B),W())}function C(){A.classList.remove("active"),v=1,f=!1,h=0,g=0,_={x:0,y:0},Y()}function I(e){if(e.ctrlKey){e.preventDefault(),O();let[t,n]=function(e){return[e.clientX-y,e.clientY-m]}(e),s=(t-h)/v,i=(n-g)/v,o=e.wheelDelta?e.wheelDelta:-e.deltaY;o>0?v*=1.2:v/=1.2,v>5&&(v=5),h=t-s*v,g=n-i*v,o<0&&(h>=0&&(h=0),g>=0&&(g=0)),v<=j&&(v=j),1!=j||v!=j?A.classList.add("active"):A.classList.remove("active"),W(),Y()}}function B(e){O(),(e.clientX<y||e.clientY<m||e.clientX>y+d||e.clientY>m+c)&&(f=!1)}function R(e){_={x:e.clientX-h,y:e.clientY-g},f=!0}function D(){f=!1}function N(e){if(!f)return;let t=e.clientX-_.x,n=e.clientY-_.y;h=t<r.xmax?r.xmax:t>0?0:t,g=n<r.ymax?r.ymax:n>0?0:n,Y()}function O(){m=a.parentNode.getBoundingClientRect().top,y=a.parentNode.getBoundingClientRect().left}function W(){let e=-(p*v-d),t=-(u*v-c);t>-10&&(t=0),e>-10&&(e=0),r={xmax:e,ymax:t}}x();const j=function(){let e=Math.floor(d/p*100)/100,t=Math.floor(window.innerHeight/u*100)/100;return e>1&&(e=1),t>1&&(t=1),e>=t?e:t}();function Y(){a.style.transform="translate("+h+"px, "+g+"px) scale("+v+")",q.innerText=~~(v/1*100)+"%"}let X,z,U,F,J=1,V=[],G=!0,K=[];function Q(){X=document.querySelectorAll(".player__score");for(let e=0;e<X.length;e++){const t=X[e];t.removeAttribute("disabled"),t.classList.add("_edit")}l.matches&&(X[0].focus(),X[0].setSelectionRange(X[0].value.length,X[0].value.length))}function Z(e){if("Enter"==e.key){let e=X[J],t=e.value.length;e.focus(),e.setSelectionRange(t,t),J++}"Tab"==e.key&&J++,J>X.length-1&&(J=0)}function ee(e){let t=e.target.closest(".tour-table__para");if(!s.classList.contains("_block"))if(t){let e=t.getAttribute("data-pos").split(",");if(t.classList.contains("_cause"))return;oe(V),ne(e,V),t.classList.add("_cause"),z=t}else oe(V)}function te(e){let t=e.target,n=t.closest(".tour-table__player");if(t.classList.contains("player__score"))return X=document.querySelectorAll(".player__score"),void(J=function(e,t){for(let n=0;n<e.length;n++)if(t.isEqualNode(e[n].closest(".player")))return n;return!1}(X,n)+1||J);if(n){let e=n.closest(".tour-table__para").getAttribute("data-pos").split(",");if(s.classList.add("_block"),1==function(e){if(!G)return!1;for(const t of K)if(e.isEqualNode(t))return F=t,!0}(n))!function(e){G=!1;let t=ie(U),n=ie(F),i=U.cloneNode(!0);i.style.position="absolute",U.prepend(i),i.style.cssText+="\n         transition: all 0.5s ease 0s;\n         z-index: 120;\n      ";let o=(n.x-t.x)/v,l=(n.y-t.y)/v;setTimeout((()=>{U.classList.remove("_active"),U.style.boxShadow="inset 0px 0px 3px rgba(105, 105, 105, 0.65)",F.style.width=`${F.offsetWidth}px`,i.style.cssText+=`\n            position: absolute;\n            top: ${l}px;\n            left: ${o}px;\n            width: ${F.offsetWidth}px;\n            box-shadow: none;\n         `,i.classList.add("_pseudo"),F.innerHTML="",F.classList.remove("hover"),i.querySelector(".player__score").value="0"}),0),setTimeout((()=>{F.append(i.querySelector(".player__info")),F.classList.add("_changed"),i.remove(),G=!0,s.classList.remove("_block"),F.removeAttribute("style"),U.removeAttribute("style"),F.length=0,K.length=0}),1e3)}();else if(n.classList.contains("_active"))n.classList.remove("_active"),s.classList.remove("_block");else{if(""==n.querySelector(".player__info").innerHTML)return;ne(e,K),U&&U.classList.remove("_active"),n.classList.add("_active"),U=n}}}function ne(e,t){let n=b[e[0]][e[1]];oe(t),n.next.forEach((n=>{let s;if(n.classList.contains("final")){let s,i,o=n.querySelectorAll(".player"),l=o.length,r=2*e[1];if(r+1>l)return;return r+2>l&&(s=o[r],s.classList.add("hover"),t.push(s)),void(r+2<=l&&(s=o[r],s.classList.add("hover"),i=o[r+1],i.classList.add("hover"),t.push(s,i)))}"true"==e[2]?(s=n.querySelector(".member1"),s.classList.add("hover")):(s=n.querySelector(".member2"),s.classList.add("hover")),t.push(s)}))}function se(e){let t=e.target.closest(".player");if(!t)return;let n=t.getAttribute("id");(!n||t&&!n.startsWith("0"))&&(t.querySelector(".player__info").innerHTML="",t.classList.add("_changed"),X=document.querySelectorAll(".player__score"),J--)}function ie(e){let{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function oe(e){z&&z.classList.remove("_cause"),0!=e.length&&(e.forEach((e=>{e.classList.remove("hover")})),e.length=0)}E&&E.addEventListener("click",(()=>{E.classList.toggle("active"),E.classList.contains("active")?(w.style.height=w.scrollHeight+"px",w.classList.add("active"),Q(),document.addEventListener("keydown",Z),s.addEventListener("pointerover",ee),s.addEventListener("click",te),s.addEventListener("dblclick",se)):function(){w.classList.remove("active"),w.style.height="0px",X=document.querySelectorAll(".player__score");for(let e=0;e<X.length;e++){const t=X[e];t.setAttribute("disabled",""),t.classList.remove("_edit")}document.removeEventListener("keydown",Z),s.removeEventListener("pointerover",ee),s.removeEventListener("click",te),s.removeEventListener("dblclick",se)}()})),S&&S.addEventListener("click",(function(){let e=document.querySelectorAll("._changed");e.length<=0||!E.classList.contains("active")||(e.forEach((e=>{let t=e.closest(".tour-table__para").getAttribute("data-pos").split(","),n=L[+t[0]][+t[1]],s=n.score,i="",o="";if(""!=e.querySelector(".player__info").innerHTML&&(i=e.querySelector(".player__name").innerText,o=e.querySelector(".player__score").value),s&&(s=s.split(",")),e.classList.contains("first"))return void(n.first=i);if(e.classList.contains("second"))return void(n.second=i);if(e.classList.contains("third"))return void(n.third=i);let l=1;e.classList.contains("member2")&&(l=2),i!=n[`player${l}`]&&(n[`player${l}`]=i),o!=s[l-1]&&(s[l-1]=o,n.score=s.join(","))})),x(),Q())})),s&&s.addEventListener("change",(e=>{e.target.closest(".player").classList.add("_changed")}))}),!1);const X=document.querySelectorAll("[data-spollers]");if(X.length>0){const ee=Array.from(X).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));ee.length>0&&ne(ee);const te=Array.from(X).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(te.length>0){const le=[];te.forEach((e=>{const t={},n=e.dataset.spollers.split(",");t.value=n[0],t.type=n[1]?n[1].trim():"max",t.item=e,le.push(t)}));let re=le.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));re=re.filter((function(e,t,n){return n.indexOf(e)===t})),re.forEach((e=>{const t=e.split(","),n=t[1],s=t[2],i=window.matchMedia(t[0]),o=le.filter((function(e){if(e.value===n&&e.type===s)return!0}));i.addEventListener("change",(()=>{ne(o,i)})),ne(o,i)}))}function ne(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),se(e),e.addEventListener("click",ie)):(e.classList.remove("_init"),se(e,!1),e.removeEventListener("click",ie))}))}function se(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function ie(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const n=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),s=n.closest("[data-spollers]"),i=!!s.hasAttribute("data-one-spoller");s.querySelectorAll("._slide").length||(i&&!n.classList.contains("_active")&&oe(s),n.classList.toggle("_active"),U(n.nextElementSibling,500)),e.preventDefault()}}function oe(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),z(t.nextElementSibling,500))}}let z=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.style.transitionTimingFunction="ease",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t))},U=(e,t=500)=>e.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.transitionTimingFunction="ease",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t)}})(e,t):z(e,t)})();