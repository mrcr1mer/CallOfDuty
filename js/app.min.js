(()=>{"use strict";const e=new IntersectionObserver((t=>{t.forEach((t=>{t.target.classList.toggle("_animate",t.isIntersecting),t.isIntersecting&&e.unobserve(t.target)}))}),{threshold:.15}),t=document.querySelectorAll("._anim");t.length>0&&t.forEach((t=>{e.observe(t)})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",(()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}))}(),function(){const e=document.querySelector(".edit-profile__item input"),t=document.querySelector(".edit-profile__preview");e&&e.addEventListener("change",(()=>{!function(n){if(!["image/jpg","image/jpeg","image/png","image/webp"].includes(n.type))return alert("Разрешены только изображения"),void(e.value="");if(n.size>2097152)return void alert("Файл должен быть менее 2мб");let s=new FileReader;s.onload=e=>{t.innerHTML=`<img src="${e.target.result}" alt="Фото">`},s.onerror=e=>{alert("Ошибка")},s.readAsDataURL(n)}(e.files[0])}))}();const n=document.querySelector(".icon-header"),s=document.querySelector(".header__top"),i=document.querySelector(".menu");n&&n.addEventListener("click",(()=>{n.classList.contains("active")?n.classList.add("reverse"):n.classList.remove("reverse"),document.body.classList.toggle("burger-lock"),n.classList.toggle("active"),s.classList.toggle("active"),i.classList.toggle("active")}));const l=document.querySelector(".menu__list"),o=window.matchMedia("(max-width: 1024px)");function r(e){e.matches?l.lastElementChild.hasAttribute("data-chat")||l.insertAdjacentHTML("beforeend",'<li data-chat=""><a href="chat.html" class="menu__link">Чат</a></li>'):l.lastElementChild.hasAttribute("data-chat")&&l.lastElementChild.remove()}l&&(o.addEventListener("change",r),r(o));const a=document.querySelectorAll(".menu__link"),c=window.location.href,d=window.location.origin;a.forEach((e=>{c===`${d}/`||c===`${d}/CallOfDuty/`?a[0].classList.add("active"):e.href===c?e.classList.add("active"):e.classList.remove("active")}));const u=document.querySelector(".aside__arrows"),p=document.querySelectorAll(".aside-open");if(u){function X(){for(let e=0;e<p.length;e++){const t=p[e];t&&t.classList.toggle("active")}}u.addEventListener("click",X)}const y=document.querySelectorAll(".popup__tab"),m=document.querySelectorAll(".popup__form");y.length>0&&function(e,t){for(let n=0;n<e.length;n++){const s=e[n];s.addEventListener("click",(()=>{const n=s.getAttribute("data-tab");for(let s=0;s<e.length;s++)n===t[s].getAttribute("data-tab-content")?(e[s].classList.add("active"),t[s].classList.add("active")):(e[s].classList.remove("active"),t[s].classList.remove("active"))}))}}(y,m);const v=document.getElementsByTagName("input");v.length>0&&g(v);const f=document.getElementsByTagName("textarea");function g(e){for(let t=0;t<e.length;t++){const n=e[t],s=n.placeholder;n.addEventListener("focus",(function(e){n.placeholder="",n.classList.remove("_error")})),n.addEventListener("blur",(function(e){n.placeholder=s}))}}f.length>0&&g(f);const h=document.querySelectorAll(".popup-link"),_=document.querySelector("body"),L=document.querySelectorAll(".lock-padding");let b=!0;if(h.length>0)for(let F=0;F<h.length;F++){const J=h[F];J.addEventListener("click",(function(e){const t=J.getAttribute("href").replace("#","");S(document.getElementById(t)),e.preventDefault()}))}const E=document.querySelectorAll(".close-popup");if(E.length>0)for(let V=0;V<E.length;V++){const G=E[V];G.addEventListener("click",(function(e){w(G.closest(".popup")),e.preventDefault()}))}function S(e){if(e&&b){const t=document.querySelector(".popup.open");t?w(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(L.length>0)for(let t=0;t<L.length;t++)L[t].style.paddingRight=e;_.style.paddingRight=e,_.classList.add("lock"),b=!1,setTimeout((function(){b=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||w(e.target.closest(".popup"))}))}}function w(e,t=!0){e.closest(".popup._sending")||b&&(e.classList.remove("open"),t&&(setTimeout((function(){if(L.length>0)for(let e=0;e<L.length;e++)L[e].style.paddingRight="0px";_.style.paddingRight="0px",_.classList.remove("lock")}),800),b=!1,setTimeout((function(){b=!0}),800)))}document.addEventListener("keydown",(function(e){"Escape"===e.key&&w(document.querySelector(".popup.open"))})),new Swiper(".about-swiper",{loop:!0,grabCursor:!0,initialSlide:3,speed:800,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},autoplay:{delay:3500,stopOnLastSlide:!1,disableOnInteraction:!1},mousewheel:{sensitivity:1,eventsTarget:".about-swiper"},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!0},preloadImages:!1,lazy:{loadOnTransitionStart:!0,loadPrevNext:!0}});let A,q=document.querySelector(".icon-chat");q&&document.addEventListener("scroll",(function(){q.style.opacity=1,q.style.visibility="visible",q.style.transform="translate(0,0)",null!=A&&clearTimeout(A),A=setTimeout((()=>{q.style.opacity=0,q.style.visibility="hidden",q.style.transform="translate(0,100%)"}),2500)}));const x=document.querySelector(".chat__content");x&&H(x);const k=document.querySelector(".chat__scroll-button");k&&P(k,x);const T=document.querySelector(".chat-aside__content");T&&H(T);const $=document.querySelector(".chat-aside__scroll-button");function H(e){e.scrollTo(0,e.scrollHeight)}function P(e,t){const n=t.scrollTop-100;t.addEventListener("scroll",(()=>{t.scrollTop<=n?(e.style.opacity=1,e.style.visibility="visible",e.style.transform="translate(0,0)"):(e.style.opacity=0,e.style.visibility="hidden",e.style.transform="translate(0,150%)")})),e.addEventListener("click",(()=>{t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}))}$&&P($,T);const C=document.querySelector(".chat__header");C&&C.addEventListener("click",(()=>{history.back()}));const M=document.querySelector(".chat-aside__body.blocked");M&&M.insertAdjacentHTML("afterbegin",'<div class="icon-blocked _icon-block"></div>\n\t\t<h3 class="title-blocked">Вы не вошли в аккаунт</h3>');const B=document.querySelector(".list-players__input-searh"),R=document.querySelectorAll(".labels-search"),I=document.querySelector(".search-alert"),N=document.querySelector(".list-players__items"),D=document.querySelector(".list-players__reset");if(B){function K(){let e=B.value.toLowerCase().trim(),t=0;e?(D.style.opacity="1",D.style.visibility="visible"):(D.style.opacity=0,D.style.visibility="hidden");for(let n=0;n<R.length;n++){const s=R[n];s.innerHTML.toLowerCase().startsWith(e)?s.closest(".list-players__item").classList.remove("hidden"):(s.closest(".list-players__item").classList.add("hidden"),t++)}t==R.length?(I.textContent="Нет совпадений",I.classList.add("show")):(I.textContent="",I.classList.remove("show")),t>=1?N.classList.add("active"):N.classList.remove("active")}B.addEventListener("input",K),D.addEventListener("click",(()=>{B.value="",K()}))}const j=document.querySelector(".info-tournament__button"),O=document.querySelector(".info-tournament__description"),W=document.querySelector(".info-tournament__img");j&&j.addEventListener("click",(e=>{j.classList.toggle("active"),O.classList.toggle("active"),W.classList.add("disabled"),j.classList.contains("active")||setTimeout((()=>{W.classList.remove("disabled")}),800)})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("#data"),t=JSON.parse(e.innerHTML);e.remove();const n=document.querySelector(".tour-table__body"),s=t.stages,i=new Array,l=document.querySelector(".edit__btn"),o=document.querySelector(".edit__save"),r=document.querySelector(".edit__tips"),a=document.querySelector(".table-scale__text"),c=document.querySelector(".table-scale__reset");let d,u,p,y,m,v,f,g,h,_=window.matchMedia("(min-width: 1025px)"),L=1,b=!1,E=0,S=0,w={x:0,y:0};function A(){u.addEventListener("pointerdown",G),u.addEventListener("pointerup",K),u.addEventListener("pointermove",Q),u.addEventListener("wheel",ee),c.addEventListener("click",Z),J()}function q(){n.innerHTML="";for(let e in s){const t=s[e];i[e]=new Array;let l=document.createElement("div");l.className="tour-table__column",l.style=s.length-1==e?`--p:${2**(e-1)};`:`--p:${2**e};`,l.insertAdjacentHTML("afterbegin",T(e));for(let n in t){const o=t[n];let r,a=document.createElement("div");a.className="tour-table__para",a.setAttribute("data-pos",k(e,n)),s.length-2==e&&n>0&&a.classList.add("extra"),s.length-1==e?(r=$(o),a.classList.add("final")):r=H(o,e,n),a.insertAdjacentHTML("beforeend",r),i[e][n]=x(a,e,n),l.append(a)}n.append(l)}u=document.getElementById("zoom"),p=u.parentElement.clientHeight,y=u.parentElement.clientWidth,m=u.scrollHeight,v=u.scrollWidth,f=u.parentNode.getBoundingClientRect().top,g=u.parentNode.getBoundingClientRect().left,_.matches&&A()}function x(e,t,n){let s={},l=new Array,o=new Array;return t<=0?{prev:l,self:e,next:o}:([i[t-1][2*n]||i[t-1][2*n-2],i[t-1][2*n+1]||i[t-1][2*n-1]].forEach(((t,n)=>{t.next.push(e),l[n]=t.self})),s={prev:l,self:e,next:o},s)}function k(e,t){let n,i;return n=t%2==0,i=s.length-1==t,`${e},${t},${n},${i}`}function T(e){let t;return t=s.length-1==e?"Финал":s.length-2==e?"Полуфинал":"Этап "+(+e+1),`\n         <div class="tour-table__stage stage">\n            <div class="stage__title">${t}</div>\n            ${s.length-2<=e?"":'<span class="stage__hide">H</span>'}\n         </div>\n      `}function $(e){return`\n         <div class="tour-table__player player player-final first">\n               <div class="player__info"> \n                  <div class="player__name">${e.first}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final second">\n               <div class="player__info">\n                  <div class="player__name">${e.second}</div>\n               </div>\n         </div>\n         <div class="tour-table__player player player-final third">\n               <div class="player__info">\n                  <div class="player__name">${e.third}</div>\n               </div>\n         </div>\n      `}function H(e,t,n){let i,l=e.score.split(","),o="",r="",a='\n         <div class="bars bars__first">\n            <div class="bars bars__second">\n               <div class="bars bars__last"></div>\n            </div>\n         </div>\n      ';return e.player1&&(o=`<div class="player__name">${e.player1}</div><input type="text" disabled class="player__score" name="edit" value="${l[0]}">`),e.player2&&(r=`<div class="player__name">${e.player2}</div><input type="text" disabled class="player__score" name="edit" value="${l[1]}">`),s.length-2==t&&(a=0==n?'<div class="bars bars__staight"></div>':""),i=`\n         <div class="tour-table__player player member1" id="${t}${n}1">\n            <div class="player__info">${o}</div>\n         </div>\n         <div class="tour-table__player player member2" id="${t}${n}2"> \n            <div class="player__info">${r}</div>\n         </div>\n         ${a}\n      `,i}function P(){h=document.querySelectorAll(".player__score");for(let e=0;e<h.length;e++){const t=h[e];t.removeAttribute("disabled"),t.classList.add("_edit")}h[0].focus(),h[0].setSelectionRange(h[0].value.length,h[0].value.length)}_.addEventListener("change",(()=>{_.matches?A():(u.removeEventListener("pointerdown",G),u.removeEventListener("pointerup",K),u.removeEventListener("pointermove",Q),u.removeEventListener("wheel",ee),c.removeEventListener("click",Z))})),q(),l.addEventListener("click",(()=>{l.classList.toggle("active"),l.classList.contains("active")?function(){let e=r.querySelectorAll(".edit__tip");r.style.height=function(e){let t=0;return e.forEach((e=>{t+=e.offsetHeight})),t}(e)+r.offsetHeight+40+"px",console.log(r.offsetHeight),r.classList.add("active"),P(),document.addEventListener("keydown",M),n.addEventListener("pointerover",I),n.addEventListener("click",O),n.addEventListener("dblclick",z)}():(r.classList.remove("active"),r.style.height="0px",h=document.querySelectorAll(".player__score"),h.forEach((e=>{e.setAttribute("disabled",""),e.classList.remove("edit")})),document.removeEventListener("keydown",M),n.removeEventListener("pointerover",I),n.removeEventListener("click",O),n.removeEventListener("dblclick",z))})),o.addEventListener("click",(function(){let e=document.querySelectorAll("._changed");e.length<=0||!l.classList.contains("active")||(e.forEach((e=>{let t=e.closest(".tour-table__para").getAttribute("data-pos").split(","),n=s[+t[0]][+t[1]],i=n.score,l="",o="";if(""!=e.querySelector(".player__info").innerHTML&&(l=e.querySelector(".player__name").innerText,o=e.querySelector(".player__score").value),i&&(i=i.split(",")),e.classList.contains("first"))return void(n.first=l);if(e.classList.contains("second"))return void(n.second=l);if(e.classList.contains("third"))return void(n.third=l);let r=1;e.classList.contains("member2")&&(r=2),l!=n[`player${r}`]&&(n[`player${r}`]=l),o!=i[r-1]&&(i[r-1]=o,n.score=i.join(","))})),q(),P())})),n.addEventListener("change",(e=>{e.target.closest(".player").classList.add("_changed")}));let C=1;function M(e){if("Enter"==e.key){let e=h[C],t=e.value.length;e.focus(),e.setSelectionRange(t,t),C++}"Tab"==e.key&&C++,C>h.length-1&&(C=0)}let B,R=[];function I(e){let t=e.target.closest(".tour-table__para");if(!n.classList.contains("_block"))if(t){let e=t.getAttribute("data-pos").split(",");if(t.classList.contains("_cause"))return;X(R),t.classList.add("_cause"),B=t,W(e,R)}else X(R)}let N,D,j=[];function O(e){let t=e.target,s=t.closest(".tour-table__para"),i=t.closest(".tour-table__player");if(t.classList.contains("player__score"))return h=document.querySelectorAll(".player__score"),void(C=function(e,t){for(let n=0;n<e.length;n++)if(t.isEqualNode(e[n].closest(".player")))return n;return!1}(h,i)+1||C);if(s){let e=s.getAttribute("data-pos").split(",");n.classList.add("_block"),1==function(e){if(!Y)return!1;for(const t of j)if(e.isEqualNode(t))return D=t,!0}(i)?function(){if(""==N.querySelector(".player__info").innerHTML)return;Y=!1;let e=U(N),t=U(D),s=N.cloneNode(!0);s.style.position="absolute",N.prepend(s),s.style.cssText+="\n         transition: all 0.5s ease 0s;\n         z-index: 120;\n      ";let i=t.x-e.x,l=t.y-e.y;setTimeout((()=>{s.style.cssText+=`\n            position: absolute;\n            top: ${l}px;\n            left: ${i}px;\n         `,s.classList.add("_pseudo")}),0),setTimeout((()=>{D.innerHTML="",s.querySelector(".player__score").value="0"}),500),setTimeout((()=>{D.append(s.querySelector(".player__info")),D.classList.add("_changed"),s.remove(),Y=!0}),1e3),N.classList.remove("_active"),n.classList.remove("_block"),D.length=0,j.length=0}():i.classList.contains("_active")?(i.classList.remove("_active"),n.classList.remove("_block")):(W(e,j),N&&N.classList.remove("_active"),i.classList.add("_active"),N=i)}}function W(e,t){let n=i[e[0]][e[1]];X(t),n.next.forEach((n=>{let s;if(n.classList.contains("final")){let s,i,l=n.querySelectorAll(".player"),o=l.length,r=2*e[1];if(r+1>o)return;return r+2>o&&(s=l[r],s.classList.add("hover"),t.push(s)),void(r+2<=o&&(s=l[r],s.classList.add("hover"),i=l[r+1],i.classList.add("hover"),t.push(s,i)))}"true"==e[2]?(s=n.querySelector(".member1"),s.classList.add("hover")):(s=n.querySelector(".member2"),s.classList.add("hover")),t.push(s)}))}function z(e){let t=e.target.closest(".player"),n=t.getAttribute("id");t&&!n.startsWith("0")&&(t.querySelector(".player__info").innerHTML="",t.classList.add("_changed"),h=document.querySelectorAll(".player__score"),C--)}let Y=!0;function U(e){let{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function X(e){B&&B.classList.remove("_cause"),0!=e.length&&(e.forEach((e=>{e.classList.remove("hover")})),e.length=0)}const F=function(){let e=Math.floor(y/v*100)/100,t=Math.floor(window.innerHeight/m*100)/100;return e>1&&(e=1),t>1&&(t=1),e>=t?e:t}();function J(){let e=-(v*L-y),t=-(m*L-p);t>-10&&(t=0),e>-10&&(e=0),console.log(e,t),d={xmax:e,ymax:t}}function V(){u.style.transform="translate("+E+"px, "+S+"px) scale("+L+")",a.innerText=~~(L/1*100)+"%"}function G(e){w={x:e.clientX-E,y:e.clientY-S},b=!0}function K(){b=!1}function Q(e){if(!b)return;let t=e.clientX-w.x,n=e.clientY-w.y;E=t<d.xmax?d.xmax:t>0?0:t,S=n<d.ymax?d.ymax:n>0?0:n,V()}function Z(){c.classList.remove("active"),L=1,b=!1,E=0,S=0,w={x:0,y:0},V()}function ee(e){if(e.ctrlKey){e.preventDefault(),f=u.parentNode.getBoundingClientRect().top,g=u.parentNode.getBoundingClientRect().left;let[t,n]=function(e){return[e.clientX-g,e.clientY-f]}(e),s=(t-E)/L,i=(n-S)/L,l=e.wheelDelta?e.wheelDelta:-e.deltaY;l>0?L*=1.2:L/=1.2,L>5&&(L=5),E=t-s*L,S=n-i*L,l<0&&(E>=0&&(E=0),S>=0&&(S=0)),L<=F&&(L=F),c.classList.add("active"),J(),V()}}}),!1);const z=document.querySelectorAll("[data-spollers]");if(z.length>0){const Q=Array.from(z).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));Q.length>0&&ee(Q);const Z=Array.from(z).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(Z.length>0){const ie=[];Z.forEach((e=>{const t={},n=e.dataset.spollers.split(",");t.value=n[0],t.type=n[1]?n[1].trim():"max",t.item=e,ie.push(t)}));let le=ie.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));le=le.filter((function(e,t,n){return n.indexOf(e)===t})),le.forEach((e=>{const t=e.split(","),n=t[1],s=t[2],i=window.matchMedia(t[0]),l=ie.filter((function(e){if(e.value===n&&e.type===s)return!0}));i.addEventListener("change",(()=>{ee(l,i)})),ee(l,i)}))}function ee(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),te(e),e.addEventListener("click",ne)):(e.classList.remove("_init"),te(e,!1),e.removeEventListener("click",ne))}))}function te(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function ne(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const n=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),s=n.closest("[data-spollers]"),i=!!s.hasAttribute("data-one-spoller");s.querySelectorAll("._slide").length||(i&&!n.classList.contains("_active")&&se(s),n.classList.toggle("_active"),U(n.nextElementSibling,400)),e.preventDefault()}}function se(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),Y(t.nextElementSibling,400))}}let Y=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.style.transitionTimingFunction="ease",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t))},U=(e,t=500)=>e.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.transitionTimingFunction="ease",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.style.removeProperty("transition-timing-function"),e.classList.remove("_slide")}),t)}})(e,t):Y(e,t)})();